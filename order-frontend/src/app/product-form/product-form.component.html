<h3>Add new product: </h3>
<div class="container" *ngIf="!submitted; else forminfo" novalidate>

  <form [formGroup]="formGroup" (ngSubmit)="onSubmit()" class="form" method="post">
    <mat-form-field class="form-element">
      <input matInput placeholder="name" formControlName="name">
      <mat-error *ngIf="!formGroup.controls['name'].valid && formGroup.controls['name'].touched">
        Required field, must be between 2 and 20 characters.
      </mat-error>
    </mat-form-field>

    <mat-form-field class="form-element">
      <input matInput placeholder="default_price" formControlName="default_price">
      <mat-error *ngIf="!formGroup.controls['default_price'].valid && formGroup.controls['default_price'].touched">
        Required field.
      </mat-error>
    </mat-form-field>

    <mat-form-field class="form-element">
      <input matInput placeholder="description" formControlName="description">
      <mat-error *ngIf="!formGroup.controls['description'].valid && formGroup.controls['description'].touched">
        Required field.
      </mat-error>
    </mat-form-field>

<!--      <mat-form-field class="form-element">-->
<!--      <input matInput placeholder="categories" formControlName="categories">-->
<!--      <mat-error *ngIf="!formGroup.controls['categories'].valid && formGroup.controls['categories'].touched">-->
<!--        Required field.-->
<!--      </mat-error>-->
<!--      <div *ngFor="let category of secretCategories.controls; let i=index" [formGroupName]="i">-->
<!--        <h3>Category #{{i+1}}, added {{category.value.name}}</h3>-->
<!--        <div class="form-group">-->
<!--          <label class="center-block">Name:-->
<!--            <input class="form-control" formControlName="name">-->
<!--          </label>-->
<!--          <br>-->
<!--        </div>-->
<!--&lt;!&ndash;        <button type="button" (click)="remove(i)">Remove</button>&ndash;&gt;-->
<!--      </div>-->
<!--    </mat-form-field>-->
<!--    <button type="button" (click)="addCategory()">Add a category</button>-->
    <mat-form-field class="form-element">
      <input matInput #inputa placeholder="Category">
      Add Categories:
      <ng-container formArrayName="categories">
        <div *ngFor="let category of categoryObj.controls; let i = index">
          <div [formGroupName]="i">
            <input formControlName="name">
            <span (click)="removeObj(i)">X</span>
          </div>
        </div>
      </ng-container>
</mat-form-field>
    <div class="form-element">
      <button mat-raised-button color="primary" type="submit" class="button" [disabled]="!formGroup.valid" >Submit Form</button>
    </div>
  </form>
</div>

<ng-template #forminfo>
  <div class="container">
    {{ formGroup.value | json }}
  </div>
</ng-template>
